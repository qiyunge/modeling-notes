# 双指针 vs 滑动窗口 —— 算法模式笔记 v0.1

## 0. 目的

本笔记用于澄清：

- 什么是「双指针」
- 什么是「滑动窗口」
- 二者的关系
- 什么时候用哪个
- 刷题时的快速判断规则

---

# 1. 核心定义

## 1.1 双指针（Two Pointers）

定义：

使用两个指针（索引）在数据结构中移动，以降低时间复杂度（通常从 O(n²) → O(n)）。

它是一种「指针移动策略」，不是问题模型。

指针可以：

- 相向移动
- 同向移动
- 不同速度移动

双指针 **不一定形成区间**。

---

## 1.2 滑动窗口（Sliding Window）

定义：

在数组/字符串的「连续区间」上维护某种性质，并动态调整区间范围。

它是一种「问题结构模型」。

结构：

[left ...... right]

窗口会：

- 扩张
- 收缩
- 维护内部统计量

---

# 2. 二者关系

Sliding Window ⊂ Two Pointers

滑动窗口一定是双指针，
但双指针不一定是滑动窗口。

双指针：一种移动方式  
滑动窗口：一种区间优化模型

---

# 3. 结构差异

| 特征 | 双指针 | 滑动窗口 |
|---|---|---|
| 本质 | 指针技巧 | 区间模型 |
| 是否形成区间 | 不一定 | 必须 |
| 是否维护区间性质 | 不需要 | 必须 |
| 指针关系 | 可以独立 | left ≤ right |
| 移动方式 | 任意规则 | right 扩张，left 收缩 |
| 目标 | 搜索 / 匹配 / 比较 | 在子区间中求最优解 |

---

# 4. 双指针类型

## 4.1 相向双指针

left = 0
right = n-1
while left < right:


用于：

- Two Sum（有序）
- 盛水最多容器
- 回文判断

目标：

通过比较移动指针。

---

## 4.2 同向快慢指针

slow = 0
for fast in range(n):


用于：

- 删除重复元素
- 数组压缩
- 链表环检测

目标：

扫描 + 维护结构。

---

## 4.3 分区型双指针

用于：

- 快速排序 partition
- 荷兰国旗问题
- 原地重排

---

# 5. 滑动窗口类型

滑动窗口一定是连续区间：

[left ...... right]

---

## 5.1 固定窗口

窗口大小固定 = k

例：

- 长度为 k 的最大子数组和

模式：

for right in range(n):
加入 nums[right]

if 窗口大小超过 k:
    移除 nums[left]
    left += 1

---

## 5.2 可变窗口

窗口动态扩张与收缩

例：

- 最长无重复子串
- 最小覆盖子串

模式：

for right in range(n):
扩张窗口

while 窗口不满足条件:
    收缩窗口
    left += 1

---

## 5.3 单调窗口

维护：

- 最大值
- 最小值

使用 deque

例：

- 滑动窗口最大值

---

# 6. 核心区别

## 双指针关注的是：

两个位置

并不关心：

- 区间内部结构
- 区间统计量

---

## 滑动窗口关注的是：

整个区间

必须维护：

- sum
- count
- 频率
- 约束

窗口本身就是“计算对象”。

---

# 7. 心智模型

双指针：

state = (i, j)

滑动窗口：

state = interval(i, j) + statistics

statistics：

- sum
- frequency
- unique count
- min/max

---

# 8. 刷题决策树

## Step 1：是否涉及连续子数组/子串？

是 → 滑动窗口候选

否 → 双指针或其他方法

---

## Step 2：是否需要维护区间内部信息？

是：

- 频率
- sum
- distinct

→ 滑动窗口

否：

→ 双指针

---

## Step 3：指针是否独立移动？

是：

→ 双指针

否（left ≤ right）：

→ 滑动窗口

---

# 9. 典型题目分类

## 双指针

- Two Sum II
- 盛水最多容器
- 回文字符串
- 删除有序数组重复元素

## 滑动窗口

- 最长无重复子串
- 最小覆盖子串
- 滑动窗口最大值
- 子数组和问题

---

# 10. 股票题属于哪类？

买卖股票：

left = 买点  
right = 卖点

但：

- 不维护区间统计量
- 只维护一个历史最小值

所以：

不是标准滑动窗口

属于：

双指针 + 状态压缩

---

# 11. 更高层统一抽象

本质都是：

状态空间搜索

双指针：

一维空间搜索

滑动窗口：

区间空间搜索

DP：

状态图搜索

图算法：

显式状态图遍历

---

# 12. 模板

## 双指针模板

left = ...
right = ...

while 条件:
if 规则:
left += 1
else:
right -= 1


---

## 滑动窗口模板

left = 0

for right in range(n):
加入元素

while 窗口不合法:
    移除元素
    left += 1

更新答案

---

# 13. 识别信号

## 双指针关键词

- sorted
- pair
- opposite ends
- in-place
- partition

---

## 滑动窗口关键词

- substring
- subarray
- longest
- shortest
- at most k
- 连续区间

---

# 14. 复杂度意义

两者都用于：

O(n²) → O(n)

但方式不同：

双指针：

避免双重循环

滑动窗口：

复用区间计算结果

---

# 15. 最终总结

双指针：

一种移动策略

滑动窗口：

一种区间优化模型

关系：

滑动窗口是双指针的特化

核心差别：

双指针操作“位置”  
滑动窗口操作“区间”